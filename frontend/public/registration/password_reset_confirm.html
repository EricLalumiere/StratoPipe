{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>StratoPipe - Set New Password</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="http://localhost:3000/styles/Auth.css">
  <link rel="stylesheet" href="http://localhost:3000/styles/components.css">
</head>
<body>
  <div class="auth-container">
    <h1>StratoPipe</h1>

    {% if validlink %}
      <h2>Set a New Password</h2>

      <form method="post" novalidate>
        {% csrf_token %}

        <div class="form-field">
          <label for="id_new_password1">New password</label>
          <input type="password" name="new_password1" id="id_new_password1" autocomplete="new-password" required />
          {% if form.new_password1.errors %}
            <div class="form-error">{{ form.new_password1.errors|striptags }}</div>
          {% endif %}
        </div>

        <div class="form-field">
          <label for="id_new_password2">Confirm new password</label>
          <input type="password" name="new_password2" id="id_new_password2" autocomplete="new-password" required />
          {% if form.new_password2.errors %}
            <div class="form-error">{{ form.new_password2.errors|striptags }}</div>
          {% endif %}
        </div>

        {% if form.non_field_errors %}
          <div class="form-error">{{ form.non_field_errors|striptags }}</div>
        {% endif %}

        <button class="neu-button" type="submit"><span>Set password</span></button>
      </form>

      <div style="margin-top:1rem;">
        <a class="neu-link" href="/login/">Back to login</a>
      </div>
    {% else %}
      <h2>Reset Link Invalid</h2>
      <p>This password reset link is invalid or has expired.</p>
      <div style="margin-top:1rem;">
        <a class="neu-button" href="/reset-password/"><span>Request a new link</span></a>
      </div>
      <div style="margin-top:0.5rem;">
        <a class="neu-link" href="/login/">Back to login</a>
      </div>
    {% endif %}
  </div>
</body>
</html>